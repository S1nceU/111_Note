## File-System Structure
+ 最小的單位就做 **block** 
+ one block is one or more **sectors**
+ fotmat : NTFS, FAT32

+ 兩種會遇到的設計問題
	+ interface to **user programs**
	+ interface to **physical storage ( disk )**

#### Layered File System
![[Pasted image 20230615215644.png]]

有可能在一個 FS manager 需要同時支援多種 FS，像是 NTFS、UFS 之類的，UFS ( Unit File Sys. )

## File System Implementation

#### On-Disk Structure
+ 必須要存在 Disk 上面，已經在硬碟上面了

+ Boot control block
	+ 通常會是第一個 partition
	+ UFS : boot block, NTFS : partition boot sector
+ Partition control block 
	+ partition 的細節
	+ UFS : superblock, NTFS : Master File Table
+ **File control block**  ( **FCB** )
	+ 檔案資訊
	+ UFS : inode, NTFS : stored in MFT ( relational database )
+ Directory structure
	+ 檔案組織

![[Pasted image 20230615221235.png]]

#### In-Memory Structure
+ in-memory partition table 
	+ mounted partition 的資訊
+ in-memory directory structure 
	+ recently accessed directories 的資訊
+ system-widr open-file table
	+ opened file's FCB
+ per-process open-file table 
	+ pointer 

#### File-Open & File-Read
![[Pasted image 20230615230110.png]]

#### File Creation Procedure
+ OS allocates a new **FCB**
+ Update **directory structure**
	+ 將對應的路徑結構到記憶體
	+ 更新結構
	+ 寫回硬碟
+ The file appears in user's dir command
## Disk Allocation Methods



## Free-Space Management


