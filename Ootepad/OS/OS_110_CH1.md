## What is OS 
+ User
+ Application : solve the computing problems
+ **OS** : **control 控制 and coordinate 分配** the hardware/resource
+ Hardware : provide basic computing resources ( CPU, memory )

+ 是一個 permanent software，開啟時就會一直看到

#### General-Purpose Operating Systems
![[Pasted image 20230408152128.png]]

#### Definition of an Operating System
+ Resource allocator
+ Control program
+ Kernel ( OS 的別名 )

#### Goals of an Operating System
+ Convenience 方便
+ Efficiency 效率
兩個會是 contradictory 矛盾
在過去，效率比較重要

#### Important of an Operating System
+ System API are **only** interface between user applications and hardware 
+ OS 不能有任何 BUG
+ OS 的擁有者控制著該軟體和硬體行業

#### Modern Operating Systems
+ x86
	+ Linux
	+ Windows 
+ PowerPC 
	+ Mac OS
+ Smartphone 
	+ Android, iOS, Windows10 Mobile, Ubuntu Touch
+ Embedded 嵌入式

	+ Embedded Linux, Windows CE 
	+ Raspberry, Xbox





## Computer-System Organization
+ Goal : **Concurrent** execution of CPUs and devices competing for memory cycles

+ Device controller
	+ data register, status register
	+ Busy/wait output
	+ is in charge of a particular device type 負責
	+ has a local buffer 
	+ **I/O is from the device to controller's local buffer** 
	+ **CPU moves data from/to memory to/from** local buffers in device controllers
	
#### Interrupt 
+ **Interrupt** allow a device to **change the flow of control in the CPU**
+ 當 I/O 呼叫 interrupt 時，CPU 會被中斷，然後跳到指定 route 處理，然後在跳回去處理原本做的事情
+ 可以讓 CPU 跟 I/O 同時做事情

+ 流程
	+ CPU 跟 Controller 指派 I/O 工作，然後 CPU 可以繼續做自己的事
	+ Controller 處理 I/O 工作，當完成時，會向 CPU 發出 interrupt
	+ CPU 收到會中止動作，處理，然後返回原本工作

+ **Hardware** sending **interrupt** to CPU, we call **signal** 
+ when **Software** occur **error or service (system call)**, it will sending **interrupt**
+ **Software** sendeing **interrupt** to CPU, we call **trap**

+ 流程
	+ Hardware
		+ CPU 在做事情時，發生了硬體 interrupt 
		+ 就會中斷且跑到 interrupt vector 找對應的事情( service routines )
		+ 回到 CPU 原本的事情
	+ Software
		+ CPU 在做事情時，發生了軟體 interrupt 
		+ 用 switch case 接 interrupt，執行對應的事情
		+ 回到 CPU 原本的事情

#### Common function of Interrupts
+ 兩種會跑不同的 OS function 
+ interrupt vector, service routines
+ 必須要記住原本的 address 的位址
+ 被重複打斷的話，會產生很多問題
+ 所以會有系統會在被 interrupt 時，會將後面的 interrupt 禁用，以免產生迴圈

